<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UltimaLive: BaseFileManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UltimaLive
   &#160;<span id="projectnumber">0.98</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classBaseFileManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BaseFileManager Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>The responsibility of the file manager is to handle the custom file formats that the client may employ. The main reason for using a factory pattern here is because the client seems to be in a transistion phase where old mul files are being converted to the new uop format. The conversion has not happened all at once, so the factory will allow the use of different file managers based on the client version.  
 <a href="classBaseFileManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BaseFileManager_8h_source.html">BaseFileManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BaseFileManager:</div>
<div class="dyncontent">
<div class="center"><img src="classBaseFileManager__inherit__graph.png" border="0" usemap="#BaseFileManager_inherit__map" alt="Inheritance graph"/></div>
<map name="BaseFileManager_inherit__map" id="BaseFileManager_inherit__map">
<area shape="rect" id="node2" href="classFileManager.html" title="FileManager class for clients using MUL files. " alt="" coords="5,80,99,107"/>
<area shape="rect" id="node3" href="classFileManager__7__0__29__2.html" title="FileManager class for clients using UOP files. " alt="" coords="123,80,279,107"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for BaseFileManager:</div>
<div class="dyncontent">
<div class="center"><img src="classBaseFileManager__coll__graph.png" border="0" usemap="#BaseFileManager_coll__map" alt="Collaboration graph"/></div>
<map name="BaseFileManager_coll__map" id="BaseFileManager_coll__map">
<area shape="rect" id="node3" href="classClientFileHandleSet.html" title="Contains pointers and handles for createfile, mapviewoffile, filesize, etc. " alt="" coords="611,105,747,132"/>
<area shape="rect" id="node4" title="STL class. " alt="" coords="385,44,465,71"/>
<area shape="rect" id="node5" title="STL class. " alt="" coords="169,37,295,78"/>
<area shape="rect" id="node6" href="classProgressBarDialog.html" title="Displays a progress bar. " alt="" coords="911,109,1041,136"/>
<area shape="rect" id="node7" title="STL class. " alt="" coords="927,180,1025,207"/>
<area shape="rect" id="node8" title="STL class. " alt="" coords="611,173,747,214"/>
<area shape="rect" id="node9" title="STL class. " alt="" coords="359,173,492,214"/>
<area shape="rect" id="node10" title="STL class. " alt="" coords="155,180,309,207"/>
<area shape="rect" id="node11" title="STL class. " alt="" coords="5,180,105,207"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8722427a38564667e7b835b2543928d1"><td class="memItemLeft" align="right" valign="top"><a id="a8722427a38564667e7b835b2543928d1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a8722427a38564667e7b835b2543928d1">BaseFileManager</a> ()</td></tr>
<tr class="memdesc:a8722427a38564667e7b835b2543928d1"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classBaseFileManager.html" title="The responsibility of the file manager is to handle the custom file formats that the client may emplo...">BaseFileManager</a> constructor. <br /></td></tr>
<tr class="separator:a8722427a38564667e7b835b2543928d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb376e982a4fe2d8c85092961968af9e"><td class="memItemLeft" align="right" valign="top">virtual HANDLE WINAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#aeb376e982a4fe2d8c85092961968af9e">OnCreateFileA</a> (__in LPCSTR lpFileName, __in DWORD dwDesiredAccess, __in DWORD dwShareMode, __in_opt LPSECURITY_ATTRIBUTES lpSecurityAttributes, __in DWORD dwCreationDisposition, __in DWORD dwFlagsAndAttributes, __in_opt HANDLE hTemplateFile)</td></tr>
<tr class="memdesc:aeb376e982a4fe2d8c85092961968af9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the client calls CreateFileA. Caches object handles needed by filemanagers.  <a href="#aeb376e982a4fe2d8c85092961968af9e">More...</a><br /></td></tr>
<tr class="separator:aeb376e982a4fe2d8c85092961968af9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d97e0a2afac2a2ed53ca86ffa0d155"><td class="memItemLeft" align="right" valign="top">virtual LPVOID WINAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a43d97e0a2afac2a2ed53ca86ffa0d155">OnMapViewOfFile</a> (__in HANDLE hFileMappingObject, __in DWORD dwDesiredAccess, __in DWORD dwFileOffsetHigh, __in DWORD dwFileOffsetLow, __in SIZE_T dwNumberOfBytesToMap)</td></tr>
<tr class="memdesc:a43d97e0a2afac2a2ed53ca86ffa0d155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called in place of client's MapViewOfFile. Stores mapping address if it corresponds to a file that <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> uses.  <a href="#a43d97e0a2afac2a2ed53ca86ffa0d155">More...</a><br /></td></tr>
<tr class="separator:a43d97e0a2afac2a2ed53ca86ffa0d155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb1fa9a09860d4bb445b23f851391ab"><td class="memItemLeft" align="right" valign="top">virtual HANDLE WINAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#abfb1fa9a09860d4bb445b23f851391ab">OnCreateFileMappingA</a> (__in HANDLE hFile, __in_opt LPSECURITY_ATTRIBUTES lpAttributes, __in DWORD flProtect, __in DWORD dwMaximumSizeHigh, __in DWORD dwMaximumSizeLow, __in_opt LPCSTR lpName)</td></tr>
<tr class="memdesc:abfb1fa9a09860d4bb445b23f851391ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the client calls createfilemapping. Stores a file mapping with a matching fileset if its a file <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> Tracks.  <a href="#abfb1fa9a09860d4bb445b23f851391ab">More...</a><br /></td></tr>
<tr class="separator:abfb1fa9a09860d4bb445b23f851391ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99ad58b36dcb31ab6e80ebdd238400ad"><td class="memItemLeft" align="right" valign="top">virtual BOOL WINAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a99ad58b36dcb31ab6e80ebdd238400ad">OnCloseHandle</a> (_In_ HANDLE hObject)</td></tr>
<tr class="memdesc:a99ad58b36dcb31ab6e80ebdd238400ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the client calls its CloseHandle function. Removes filenames from the list of open handles.  <a href="#a99ad58b36dcb31ab6e80ebdd238400ad">More...</a><br /></td></tr>
<tr class="separator:a99ad58b36dcb31ab6e80ebdd238400ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc29565844789ed3e4a46d426296a56"><td class="memItemLeft" align="right" valign="top">virtual unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a0fc29565844789ed3e4a46d426296a56">readStaticsBlock</a> (uint32_t mapNumber, uint32_t blockNum, uint32_t &amp;rNumberOfBytesOut)</td></tr>
<tr class="memdesc:a0fc29565844789ed3e4a46d426296a56"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads data corresponding to all statics contained in one map block  <a href="#a0fc29565844789ed3e4a46d426296a56">More...</a><br /></td></tr>
<tr class="separator:a0fc29565844789ed3e4a46d426296a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83076a39e86ec0eeec19bd21d09685fb"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a83076a39e86ec0eeec19bd21d09685fb">writeStaticsBlock</a> (uint8_t mapNumber, uint32_t blockNum, uint8_t *pBlockData, uint32_t length)</td></tr>
<tr class="memdesc:a83076a39e86ec0eeec19bd21d09685fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data corresponding to the statics in a map block out to memory and to the <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> file cache.  <a href="#a83076a39e86ec0eeec19bd21d09685fb">More...</a><br /></td></tr>
<tr class="separator:a83076a39e86ec0eeec19bd21d09685fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aded6bb2fb2a583e6912e113eefc7fa"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a0aded6bb2fb2a583e6912e113eefc7fa">Initialize</a> ()</td></tr>
<tr class="memdesc:a0aded6bb2fb2a583e6912e113eefc7fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <a class="el" href="classBaseFileManager.html" title="The responsibility of the file manager is to handle the custom file formats that the client may emplo...">BaseFileManager</a> by allocating memory internally in the client for maps, statics, and indices.  <a href="#a0aded6bb2fb2a583e6912e113eefc7fa">More...</a><br /></td></tr>
<tr class="separator:a0aded6bb2fb2a583e6912e113eefc7fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cd12afcc8dcff37b056e8d3a68503bd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a9cd12afcc8dcff37b056e8d3a68503bd">LoadMap</a> (uint8_t mapNumber)=0</td></tr>
<tr class="memdesc:a9cd12afcc8dcff37b056e8d3a68503bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a map.  <a href="#a9cd12afcc8dcff37b056e8d3a68503bd">More...</a><br /></td></tr>
<tr class="separator:a9cd12afcc8dcff37b056e8d3a68503bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7bab48bba7ea8ab612e3b8154c6257"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a2a7bab48bba7ea8ab612e3b8154c6257">InitializeShardMaps</a> (std::string shardIdentifier, std::map&lt; uint32_t, <a class="el" href="classMapDefinition.html">MapDefinition</a> &gt; definitions)</td></tr>
<tr class="memdesc:a2a7bab48bba7ea8ab612e3b8154c6257"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a shards maps by creating or copying new maps into the <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> file cache.  <a href="#a2a7bab48bba7ea8ab612e3b8154c6257">More...</a><br /></td></tr>
<tr class="separator:a2a7bab48bba7ea8ab612e3b8154c6257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b06707414a7b3e4809eb14bc0b56d7b"><td class="memItemLeft" align="right" valign="top"><a id="a8b06707414a7b3e4809eb14bc0b56d7b"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a8b06707414a7b3e4809eb14bc0b56d7b">onLogout</a> ()</td></tr>
<tr class="memdesc:a8b06707414a7b3e4809eb14bc0b56d7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">handles client logout and prepares <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> for a new login <br /></td></tr>
<tr class="separator:a8b06707414a7b3e4809eb14bc0b56d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe933c9fb8998fdb396d75bdff9cdb98"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#abe933c9fb8998fdb396d75bdff9cdb98">updateLandBlock</a> (uint8_t mapNumber, uint32_t blockNum, uint8_t *pData)</td></tr>
<tr class="memdesc:abe933c9fb8998fdb396d75bdff9cdb98"><td class="mdescLeft">&#160;</td><td class="mdescRight">updates a land block in memory and in <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a>'s map cache on disk  <a href="#abe933c9fb8998fdb396d75bdff9cdb98">More...</a><br /></td></tr>
<tr class="separator:abe933c9fb8998fdb396d75bdff9cdb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad948b3141cb210a1f32530109cdcc4d0"><td class="memItemLeft" align="right" valign="top">virtual unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#ad948b3141cb210a1f32530109cdcc4d0">readLandBlock</a> (uint8_t mapNumber, uint32_t blockNum)</td></tr>
<tr class="memdesc:ad948b3141cb210a1f32530109cdcc4d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a land block and returns a pointer to the newly allocated memory. Caller is responsible for memory cleanup.  <a href="#ad948b3141cb210a1f32530109cdcc4d0">More...</a><br /></td></tr>
<tr class="separator:ad948b3141cb210a1f32530109cdcc4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dd3bc918e3e7601f02323f1cffdc5b5"><td class="memItemLeft" align="right" valign="top">virtual unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a6dd3bc918e3e7601f02323f1cffdc5b5">seekLandBlock</a> (uint8_t mapNumber, uint32_t blockNum)=0</td></tr>
<tr class="memdesc:a6dd3bc918e3e7601f02323f1cffdc5b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seeks a land block in map file.  <a href="#a6dd3bc918e3e7601f02323f1cffdc5b5">More...</a><br /></td></tr>
<tr class="separator:a6dd3bc918e3e7601f02323f1cffdc5b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a94d2f0838ef471cfa01c6867919c8067"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a94d2f0838ef471cfa01c6867919c8067">copyFile</a> (std::string sourceFilePath, std::string destFilePath, <a class="el" href="classProgressBarDialog.html">ProgressBarDialog</a> *pProgress)</td></tr>
<tr class="memdesc:a94d2f0838ef471cfa01c6867919c8067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy a file from one location to another.  <a href="#a94d2f0838ef471cfa01c6867919c8067">More...</a><br /></td></tr>
<tr class="separator:a94d2f0838ef471cfa01c6867919c8067"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:abfcf506e24fe2d5674f3fdaf1c57dc81"><td class="memItemLeft" align="right" valign="top"><a id="abfcf506e24fe2d5674f3fdaf1c57dc81"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#abfcf506e24fe2d5674f3fdaf1c57dc81">MAP_MEMORY_SIZE</a> = 100000000</td></tr>
<tr class="memdesc:abfcf506e24fe2d5674f3fdaf1c57dc81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory to allocate for the largest possible map file. <br /></td></tr>
<tr class="separator:abfcf506e24fe2d5674f3fdaf1c57dc81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf2d7b4b77c787bca6564c1d067dd0e"><td class="memItemLeft" align="right" valign="top"><a id="afcf2d7b4b77c787bca6564c1d067dd0e"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#afcf2d7b4b77c787bca6564c1d067dd0e">STAIDX_MEMORY_SIZE</a> = 10000000</td></tr>
<tr class="memdesc:afcf2d7b4b77c787bca6564c1d067dd0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory to allocate for the largest possible statics index file. <br /></td></tr>
<tr class="separator:afcf2d7b4b77c787bca6564c1d067dd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa379b6947695649a34711b69754a6087"><td class="memItemLeft" align="right" valign="top"><a id="aa379b6947695649a34711b69754a6087"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#aa379b6947695649a34711b69754a6087">STATICS_MEMORY_SIZE</a> = 200000000</td></tr>
<tr class="memdesc:aa379b6947695649a34711b69754a6087"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory to allocate for the largets possible statics file. <br /></td></tr>
<tr class="separator:aa379b6947695649a34711b69754a6087"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a30ff39dfc01d4b1e688c59032c5513d6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a30ff39dfc01d4b1e688c59032c5513d6">getUltimaLiveSavePath</a> ()</td></tr>
<tr class="memdesc:a30ff39dfc01d4b1e688c59032c5513d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> cache path for the platform.  <a href="#a30ff39dfc01d4b1e688c59032c5513d6">More...</a><br /></td></tr>
<tr class="separator:a30ff39dfc01d4b1e688c59032c5513d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac949cf6b887150940cfeb1c246f27dff"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#ac949cf6b887150940cfeb1c246f27dff">createNewPersistentMap</a> (std::string pathWithoutFilename, uint8_t mapNumber, uint32_t numHorizontalBlocks, uint32_t numVerticalBlocks)</td></tr>
<tr class="memdesc:ac949cf6b887150940cfeb1c246f27dff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new blank map in the map store from scratch.  <a href="#ac949cf6b887150940cfeb1c246f27dff">More...</a><br /></td></tr>
<tr class="separator:ac949cf6b887150940cfeb1c246f27dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02a4fac08242930da92a31f893bb4600"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a02a4fac08242930da92a31f893bb4600">checkValidMemoryAllocated</a> (void *pBuffer)</td></tr>
<tr class="memdesc:a02a4fac08242930da92a31f893bb4600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> has allocated a valid pool of memory.  <a href="#a02a4fac08242930da92a31f893bb4600">More...</a><br /></td></tr>
<tr class="separator:a02a4fac08242930da92a31f893bb4600"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ab708138cd82a0ce3476efe1b70c97e11"><td class="memItemLeft" align="right" valign="top"><a id="ab708138cd82a0ce3476efe1b70c97e11"></a>
std::map&lt; std::string, <a class="el" href="classClientFileHandleSet.html">ClientFileHandleSet</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#ab708138cd82a0ce3476efe1b70c97e11">m_files</a></td></tr>
<tr class="memdesc:ab708138cd82a0ce3476efe1b70c97e11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps the base map name to the set of handles for the corresponding files (map#.mul, staidx#.mul statics#.mul) <br /></td></tr>
<tr class="separator:ab708138cd82a0ce3476efe1b70c97e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1eccc197680baa27dd8228829993279"><td class="memItemLeft" align="right" valign="top"><a id="af1eccc197680baa27dd8228829993279"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#af1eccc197680baa27dd8228829993279">m_pMapPool</a></td></tr>
<tr class="memdesc:af1eccc197680baa27dd8228829993279"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the memory pool used to load and unload maps. <br /></td></tr>
<tr class="separator:af1eccc197680baa27dd8228829993279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9073d2e988ca6c79a5f732101f83e62f"><td class="memItemLeft" align="right" valign="top"><a id="a9073d2e988ca6c79a5f732101f83e62f"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a9073d2e988ca6c79a5f732101f83e62f">m_pStaticsPool</a></td></tr>
<tr class="memdesc:a9073d2e988ca6c79a5f732101f83e62f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the memory pool used to load and unload statics. <br /></td></tr>
<tr class="separator:a9073d2e988ca6c79a5f732101f83e62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49bb4da998cb86555a77b822fb594bc"><td class="memItemLeft" align="right" valign="top"><a id="ac49bb4da998cb86555a77b822fb594bc"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#ac49bb4da998cb86555a77b822fb594bc">m_pStaticsPoolEnd</a></td></tr>
<tr class="memdesc:ac49bb4da998cb86555a77b822fb594bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the end of the statics memory pool. <br /></td></tr>
<tr class="separator:ac49bb4da998cb86555a77b822fb594bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a05ff042385e21c9a4f42e476c577a0"><td class="memItemLeft" align="right" valign="top"><a id="a0a05ff042385e21c9a4f42e476c577a0"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a0a05ff042385e21c9a4f42e476c577a0">m_pStaidxPool</a></td></tr>
<tr class="memdesc:a0a05ff042385e21c9a4f42e476c577a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the statics index memory pool. <br /></td></tr>
<tr class="separator:a0a05ff042385e21c9a4f42e476c577a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7710ed939a9f4c8ba4a5e8697a4f1bc5"><td class="memItemLeft" align="right" valign="top"><a id="a7710ed939a9f4c8ba4a5e8697a4f1bc5"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a7710ed939a9f4c8ba4a5e8697a4f1bc5">m_pStaidxPoolEnd</a></td></tr>
<tr class="memdesc:a7710ed939a9f4c8ba4a5e8697a4f1bc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the end of the statics index memory pool. <br /></td></tr>
<tr class="separator:a7710ed939a9f4c8ba4a5e8697a4f1bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d34304e4dadcae6e9a5526788be2ad"><td class="memItemLeft" align="right" valign="top"><a id="a15d34304e4dadcae6e9a5526788be2ad"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a15d34304e4dadcae6e9a5526788be2ad">m_shardIdentifier</a></td></tr>
<tr class="memdesc:a15d34304e4dadcae6e9a5526788be2ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique shard identifier. <br /></td></tr>
<tr class="separator:a15d34304e4dadcae6e9a5526788be2ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac985d39ad29f4eab6f331e026c9731fc"><td class="memItemLeft" align="right" valign="top"><a id="ac985d39ad29f4eab6f331e026c9731fc"></a>
std::ofstream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#ac985d39ad29f4eab6f331e026c9731fc">m_pMapFileStream</a></td></tr>
<tr class="memdesc:ac985d39ad29f4eab6f331e026c9731fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to map file stream. <br /></td></tr>
<tr class="separator:ac985d39ad29f4eab6f331e026c9731fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0926f53f6cd831373aa1f1b0685b6f5a"><td class="memItemLeft" align="right" valign="top"><a id="a0926f53f6cd831373aa1f1b0685b6f5a"></a>
std::ofstream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a0926f53f6cd831373aa1f1b0685b6f5a">m_pStaidxFileStream</a></td></tr>
<tr class="memdesc:a0926f53f6cd831373aa1f1b0685b6f5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to statics index file stream. <br /></td></tr>
<tr class="separator:a0926f53f6cd831373aa1f1b0685b6f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04ba28709fdcc16bf389f97c9c1bc769"><td class="memItemLeft" align="right" valign="top"><a id="a04ba28709fdcc16bf389f97c9c1bc769"></a>
std::ofstream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#a04ba28709fdcc16bf389f97c9c1bc769">m_pStaticsFileStream</a></td></tr>
<tr class="memdesc:a04ba28709fdcc16bf389f97c9c1bc769"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to statics file stream. <br /></td></tr>
<tr class="separator:a04ba28709fdcc16bf389f97c9c1bc769"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5ead8e78e8eb75bd3ba1b4800d14f8"><td class="memItemLeft" align="right" valign="top"><a id="aaa5ead8e78e8eb75bd3ba1b4800d14f8"></a>
<a class="el" href="classProgressBarDialog.html">ProgressBarDialog</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseFileManager.html#aaa5ead8e78e8eb75bd3ba1b4800d14f8">m_pProgressDlg</a></td></tr>
<tr class="memdesc:aaa5ead8e78e8eb75bd3ba1b4800d14f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the progress bar dialog. <br /></td></tr>
<tr class="separator:aaa5ead8e78e8eb75bd3ba1b4800d14f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The responsibility of the file manager is to handle the custom file formats that the client may employ. The main reason for using a factory pattern here is because the client seems to be in a transistion phase where old mul files are being converted to the new uop format. The conversion has not happened all at once, so the factory will allow the use of different file managers based on the client version. </p>
<p>The file manager will redirect the client to open files from alternate folders, alter files that are on disk, create new map files, defragment files, and any other filesystem type tasks. </p>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8h_source.html#l00056">56</a> of file <a class="el" href="BaseFileManager_8h_source.html">BaseFileManager.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a02a4fac08242930da92a31f893bb4600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02a4fac08242930da92a31f893bb4600">&#9670;&nbsp;</a></span>checkValidMemoryAllocated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseFileManager::checkValidMemoryAllocated </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pBuffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks to see if <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> has allocated a valid pool of memory. </p>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00774">774</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="Debug_8h_source.html#l00110">Logger::g_pLogger</a>, <a class="el" href="classLogger.html#a5807182c633017a97b16b76f27857686">Logger::LogLastErrorMessage()</a>, <a class="el" href="classLogger.html#a5d08e73b13c0bade3be70a12c6ccabe2">Logger::LogPrintError()</a>, <a class="el" href="classLogger.html#a88385ddd15152239e0010cc4ef631f92">Logger::LogPrintTaskStatusResult()</a>, and <a class="el" href="BaseFileManager_8h_source.html#l00124">m_pMapPool</a>.</p>

<p class="reference">Referenced by <a class="el" href="BaseFileManager_8cpp_source.html#l00259">Initialize()</a>.</p>

</div>
</div>
<a id="a94d2f0838ef471cfa01c6867919c8067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94d2f0838ef471cfa01c6867919c8067">&#9670;&nbsp;</a></span>copyFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BaseFileManager::copyFile </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>sourceFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>destFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classProgressBarDialog.html">ProgressBarDialog</a> *&#160;</td>
          <td class="paramname"><em>pProgress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy a file from one location to another. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sourceFilePath</td><td>source path </td></tr>
    <tr><td class="paramname">destFilePath</td><td>destination path </td></tr>
    <tr><td class="paramname">pProgress</td><td>progress bar handle </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00409">409</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="ProgressBarDialog_8cpp_source.html#l00073">ProgressBarDialog::setProgress()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FileManager__7__0__29__2_8cpp_source.html#l00331">FileManager_7_0_29_2::InitializeShardMaps()</a>, and <a class="el" href="BaseFileManager_8cpp_source.html#l00468">InitializeShardMaps()</a>.</p>

</div>
</div>
<a id="ac949cf6b887150940cfeb1c246f27dff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac949cf6b887150940cfeb1c246f27dff">&#9670;&nbsp;</a></span>createNewPersistentMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseFileManager::createNewPersistentMap </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>pathWithoutFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mapNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numHorizontalBlocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numVerticalBlocks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new blank map in the map store from scratch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pathWithoutFilename</td><td>location to save file </td></tr>
    <tr><td class="paramname">mapNumber</td><td>Number to be appended to the new filename </td></tr>
    <tr><td class="paramname">numHorizontalBlocks</td><td>Number of horizontal blocks for the new map </td></tr>
    <tr><td class="paramname">numVerticalBlocks</td><td>Number of vertical blocks for the new map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00326">326</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="Debug_8h_source.html#l00110">Logger::g_pLogger</a>, and <a class="el" href="classLogger.html#a827dd7de91559307344d98a5a939da1e">Logger::LogPrint()</a>.</p>

<p class="reference">Referenced by <a class="el" href="FileManager__7__0__29__2_8cpp_source.html#l00331">FileManager_7_0_29_2::InitializeShardMaps()</a>, and <a class="el" href="BaseFileManager_8cpp_source.html#l00468">InitializeShardMaps()</a>.</p>

</div>
</div>
<a id="a30ff39dfc01d4b1e688c59032c5513d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30ff39dfc01d4b1e688c59032c5513d6">&#9670;&nbsp;</a></span>getUltimaLiveSavePath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string BaseFileManager::getUltimaLiveSavePath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> cache path for the platform. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> cache path </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00596">596</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="BaseFileManager_8cpp_source.html#l00259">Initialize()</a>, <a class="el" href="FileManager__7__0__29__2_8cpp_source.html#l00331">FileManager_7_0_29_2::InitializeShardMaps()</a>, <a class="el" href="BaseFileManager_8cpp_source.html#l00468">InitializeShardMaps()</a>, <a class="el" href="FileManager_8cpp_source.html#l00068">FileManager::LoadMap()</a>, and <a class="el" href="FileManager__7__0__29__2_8cpp_source.html#l00071">FileManager_7_0_29_2::LoadMap()</a>.</p>

</div>
</div>
<a id="a0aded6bb2fb2a583e6912e113eefc7fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aded6bb2fb2a583e6912e113eefc7fa">&#9670;&nbsp;</a></span>Initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseFileManager::Initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the <a class="el" href="classBaseFileManager.html" title="The responsibility of the file manager is to handle the custom file formats that the client may emplo...">BaseFileManager</a> by allocating memory internally in the client for maps, statics, and indices. </p>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p>Reimplemented in <a class="el" href="classFileManager__7__0__29__2.html#a7a7603846ec9cb460d5b488c2cdab3c8">FileManager_7_0_29_2</a>, and <a class="el" href="classFileManager.html#a30bb798b7198a25e5d69db6bd5634696">FileManager</a>.</p>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00259">259</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="BaseFileManager_8cpp_source.html#l00774">checkValidMemoryAllocated()</a>, <a class="el" href="Debug_8h_source.html#l00110">Logger::g_pLogger</a>, <a class="el" href="BaseFileManager_8cpp_source.html#l00596">getUltimaLiveSavePath()</a>, <a class="el" href="classLogger.html#a9ee915d2b364756f10e95ef9565d5903">Logger::LogPrintWithoutDate()</a>, <a class="el" href="BaseFileManager_8h_source.html#l00124">m_pMapPool</a>, <a class="el" href="BaseFileManager_8h_source.html#l00127">m_pStaidxPool</a>, <a class="el" href="BaseFileManager_8h_source.html#l00125">m_pStaticsPool</a>, <a class="el" href="BaseFileManager_8h_source.html#l00126">m_pStaticsPoolEnd</a>, <a class="el" href="BaseFileManager_8h_source.html#l00118">MAP_MEMORY_SIZE</a>, <a class="el" href="BaseFileManager_8h_source.html#l00119">STAIDX_MEMORY_SIZE</a>, and <a class="el" href="BaseFileManager_8h_source.html#l00120">STATICS_MEMORY_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="FileManagerFactory_8cpp_source.html#l00059">FileManagerFactory::Initialize()</a>, <a class="el" href="FileManager_8cpp_source.html#l00250">FileManager::Initialize()</a>, and <a class="el" href="FileManager__7__0__29__2_8cpp_source.html#l00162">FileManager_7_0_29_2::Initialize()</a>.</p>

</div>
</div>
<a id="a2a7bab48bba7ea8ab612e3b8154c6257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a7bab48bba7ea8ab612e3b8154c6257">&#9670;&nbsp;</a></span>InitializeShardMaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BaseFileManager::InitializeShardMaps </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>shardIdentifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; uint32_t, <a class="el" href="classMapDefinition.html">MapDefinition</a> &gt;&#160;</td>
          <td class="paramname"><em>mapDefinitions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a shards maps by creating or copying new maps into the <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> file cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shardIdentifier</td><td>Unique shard identifier </td></tr>
    <tr><td class="paramname">mapDefinitions</td><td>Map definitions for the shard </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classFileManager__7__0__29__2.html#a61b5ef614e4dcea6a8f344126fdd22dd">FileManager_7_0_29_2</a>.</p>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00468">468</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="BaseFileManager_8cpp_source.html#l00409">copyFile()</a>, <a class="el" href="BaseFileManager_8cpp_source.html#l00326">createNewPersistentMap()</a>, <a class="el" href="Debug_8h_source.html#l00110">Logger::g_pLogger</a>, <a class="el" href="Utils_8cpp_source.html#l00075">Utils::GetCurrentPathWithoutFilename()</a>, <a class="el" href="BaseFileManager_8cpp_source.html#l00596">getUltimaLiveSavePath()</a>, <a class="el" href="ProgressBarDialog_8cpp_source.html#l00109">ProgressBarDialog::hide()</a>, <a class="el" href="classLogger.html#a827dd7de91559307344d98a5a939da1e">Logger::LogPrint()</a>, <a class="el" href="BaseFileManager_8h_source.html#l00138">m_pProgressDlg</a>, <a class="el" href="BaseFileManager_8h_source.html#l00129">m_shardIdentifier</a>, <a class="el" href="ProgressBarDialog_8cpp_source.html#l00092">ProgressBarDialog::setMessage()</a>, <a class="el" href="ProgressBarDialog_8cpp_source.html#l00073">ProgressBarDialog::setProgress()</a>, and <a class="el" href="ProgressBarDialog_8cpp_source.html#l00101">ProgressBarDialog::show()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Atlas_8cpp_source.html#l00142">Atlas::LoadMap()</a>.</p>

</div>
</div>
<a id="a9cd12afcc8dcff37b056e8d3a68503bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cd12afcc8dcff37b056e8d3a68503bd">&#9670;&nbsp;</a></span>LoadMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseFileManager::LoadMap </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mapNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load a map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapNumber</td><td>Map number </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classFileManager__7__0__29__2.html#a676fd4ef0ca8ada91382dad131c862b5">FileManager_7_0_29_2</a>, and <a class="el" href="classFileManager.html#a3dcea47e559f07fcb857c2c40b269923">FileManager</a>.</p>

<p class="reference">Referenced by <a class="el" href="Atlas_8cpp_source.html#l00142">Atlas::LoadMap()</a>.</p>

</div>
</div>
<a id="a99ad58b36dcb31ab6e80ebdd238400ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99ad58b36dcb31ab6e80ebdd238400ad">&#9670;&nbsp;</a></span>OnCloseHandle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BOOL WINAPI BaseFileManager::OnCloseHandle </td>
          <td>(</td>
          <td class="paramtype">_In_ HANDLE&#160;</td>
          <td class="paramname"><em>hObject</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the client calls its CloseHandle function. Removes filenames from the list of open handles. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hObject</td><td>Object Handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00634">634</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="BaseFileManager_8h_source.html#l00123">m_files</a>.</p>

<p class="reference">Referenced by <a class="el" href="ClientRedirections_8cpp_source.html#l00374">ClientRedirections::OnCloseHandle()</a>.</p>

</div>
</div>
<a id="aeb376e982a4fe2d8c85092961968af9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb376e982a4fe2d8c85092961968af9e">&#9670;&nbsp;</a></span>OnCreateFileA()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">HANDLE WINAPI BaseFileManager::OnCreateFileA </td>
          <td>(</td>
          <td class="paramtype">__in LPCSTR&#160;</td>
          <td class="paramname"><em>lpFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwDesiredAccess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwShareMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in_opt LPSECURITY_ATTRIBUTES&#160;</td>
          <td class="paramname"><em>lpSecurityAttributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwCreationDisposition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwFlagsAndAttributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in_opt HANDLE&#160;</td>
          <td class="paramname"><em>hTemplateFile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the client calls CreateFileA. Caches object handles needed by filemanagers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lpFileName</td><td>The name of the file or device to be created or opened. </td></tr>
    <tr><td class="paramname">dwDesiredAccess</td><td>The requested access to the file or device, which can be summarized as read, write, both or neither. </td></tr>
    <tr><td class="paramname">dwShareMode</td><td>The requested sharing mode of the file or device, which can be read, write, both, delete, all of these, or none. </td></tr>
    <tr><td class="paramname">lpSecurityAttributes</td><td>A pointer to a SECURITY_ATTRIBUTES structure that contains two separate but related data members. </td></tr>
    <tr><td class="paramname">dwCreationDisposition</td><td>An action to take on a file or device that exists or does not exist. </td></tr>
    <tr><td class="paramname">dwFlagsAndAttributes</td><td>The file or device attributes and flags, FILE_ATTRIBUTE_NORMAL being the most common default value for files. </td></tr>
    <tr><td class="paramname">hTemplateFile</td><td>A valid handle to a template file with the GENERIC_READ access right.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Object Handle </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00661">661</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="Utils_8cpp_source.html#l00226">Utils::getFilenameFromPath()</a>, and <a class="el" href="BaseFileManager_8h_source.html#l00123">m_files</a>.</p>

<p class="reference">Referenced by <a class="el" href="ClientRedirections_8cpp_source.html#l00257">ClientRedirections::OnCreateFileA()</a>, and <a class="el" href="ClientRedirections_8cpp_source.html#l00220">ClientRedirections::OnCreateFileARunOnce()</a>.</p>

</div>
</div>
<a id="abfb1fa9a09860d4bb445b23f851391ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfb1fa9a09860d4bb445b23f851391ab">&#9670;&nbsp;</a></span>OnCreateFileMappingA()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">HANDLE WINAPI BaseFileManager::OnCreateFileMappingA </td>
          <td>(</td>
          <td class="paramtype">__in HANDLE&#160;</td>
          <td class="paramname"><em>hFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in_opt LPSECURITY_ATTRIBUTES&#160;</td>
          <td class="paramname"><em>lpAttributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>flProtect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwMaximumSizeHigh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwMaximumSizeLow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in_opt LPCSTR&#160;</td>
          <td class="paramname"><em>lpName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the client calls createfilemapping. Stores a file mapping with a matching fileset if its a file <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> Tracks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hFile</td><td>A handle to the file from which to create a file mapping object. </td></tr>
    <tr><td class="paramname">lpAttributes</td><td>A pointer to a SECURITY_ATTRIBUTES structure that determines whether a returned handle can be inherited by child processes. </td></tr>
    <tr><td class="paramname">flProtect</td><td>Specifies the page protection of the file mapping object. </td></tr>
    <tr><td class="paramname">dwMaximumSizeHigh</td><td>The high-order DWORD of the maximum size of the file mapping object. </td></tr>
    <tr><td class="paramname">dwMaximumSizeLow</td><td>The low-order DWORD of the maximum size of the file mapping object. </td></tr>
    <tr><td class="paramname">lpName</td><td>The name of the file mapping object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New File's Handle </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00699">699</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="ClientFileHandleSet_8h_source.html#l00045">ClientFileHandleSet::m_createFileMappingHandle</a>, and <a class="el" href="BaseFileManager_8h_source.html#l00123">m_files</a>.</p>

<p class="reference">Referenced by <a class="el" href="ClientRedirections_8cpp_source.html#l00347">ClientRedirections::OnCreateFileMappingA()</a>.</p>

</div>
</div>
<a id="a43d97e0a2afac2a2ed53ca86ffa0d155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d97e0a2afac2a2ed53ca86ffa0d155">&#9670;&nbsp;</a></span>OnMapViewOfFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LPVOID WINAPI BaseFileManager::OnMapViewOfFile </td>
          <td>(</td>
          <td class="paramtype">__in HANDLE&#160;</td>
          <td class="paramname"><em>hFileMappingObject</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwDesiredAccess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwFileOffsetHigh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in DWORD&#160;</td>
          <td class="paramname"><em>dwFileOffsetLow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__in SIZE_T&#160;</td>
          <td class="paramname"><em>dwNumberOfBytesToMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called in place of client's MapViewOfFile. Stores mapping address if it corresponds to a file that <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> uses. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hFileMappingObject</td><td>A handle to a file mapping object. </td></tr>
    <tr><td class="paramname">dwDesiredAccess</td><td>The type of access to a file mapping object, which determines the protection of the pages. </td></tr>
    <tr><td class="paramname">dwFileOffsetHigh</td><td>A high-order DWORD of the file offset where the view begins. </td></tr>
    <tr><td class="paramname">dwFileOffsetLow</td><td>A low-order DWORD of the file offset where the view is to begin. </td></tr>
    <tr><td class="paramname">dwNumberOfBytesToMap</td><td>The number of bytes of a file mapping to map to the view.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The starting address of the mapped view </dd></dl>

<p>Reimplemented in <a class="el" href="classFileManager__7__0__29__2.html#ad5d029d3777a78150be5d826385b4683">FileManager_7_0_29_2</a>, and <a class="el" href="classFileManager.html#af38402af50d7b5d7a794f75f2712f746">FileManager</a>.</p>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00740">740</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="BaseFileManager_8h_source.html#l00123">m_files</a>, and <a class="el" href="ClientFileHandleSet_8h_source.html#l00046">ClientFileHandleSet::m_mapFileViewHandle</a>.</p>

<p class="reference">Referenced by <a class="el" href="ClientRedirections_8cpp_source.html#l00288">ClientRedirections::OnMapViewOfFile()</a>.</p>

</div>
</div>
<a id="ad948b3141cb210a1f32530109cdcc4d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad948b3141cb210a1f32530109cdcc4d0">&#9670;&nbsp;</a></span>readLandBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char * BaseFileManager::readLandBlock </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mapNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a land block and returns a pointer to the newly allocated memory. Caller is responsible for memory cleanup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapNumber</td><td>number corresponding to the map to search </td></tr>
    <tr><td class="paramname">blockNum</td><td>number corresponding to the block in the map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the block memory </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00041">41</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="classBaseFileManager.html#a6dd3bc918e3e7601f02323f1cffdc5b5">seekLandBlock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Atlas_8cpp_source.html#l00451">Atlas::getBlockCrc()</a>.</p>

</div>
</div>
<a id="a0fc29565844789ed3e4a46d426296a56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fc29565844789ed3e4a46d426296a56">&#9670;&nbsp;</a></span>readStaticsBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char * BaseFileManager::readStaticsBlock </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mapNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t &amp;&#160;</td>
          <td class="paramname"><em>rNumberOfBytesOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>reads data corresponding to all statics contained in one map block </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapNumber</td><td>Map Number </td></tr>
    <tr><td class="paramname">blockNum</td><td>Block Number </td></tr>
    <tr><td class="paramname">rNumberOfBytesOut</td><td>number of bytes read</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to memory containing statics in the block </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00132">132</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="BaseFileManager_8h_source.html#l00127">m_pStaidxPool</a>, and <a class="el" href="BaseFileManager_8h_source.html#l00125">m_pStaticsPool</a>.</p>

<p class="reference">Referenced by <a class="el" href="Atlas_8cpp_source.html#l00451">Atlas::getBlockCrc()</a>.</p>

</div>
</div>
<a id="a6dd3bc918e3e7601f02323f1cffdc5b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dd3bc918e3e7601f02323f1cffdc5b5">&#9670;&nbsp;</a></span>seekLandBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual unsigned char* BaseFileManager::seekLandBlock </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mapNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Seeks a land block in map file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapNumber</td><td>Map Number </td></tr>
    <tr><td class="paramname">blockNum</td><td>Block Number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to land block memory </dd></dl>

<p>Implemented in <a class="el" href="classFileManager__7__0__29__2.html#a7257e06ce56cfb5c49d109c47dfffb0e">FileManager_7_0_29_2</a>, and <a class="el" href="classFileManager.html#ad7a8c9ca62de34fe28561d0069d6ddb5">FileManager</a>.</p>

<p class="reference">Referenced by <a class="el" href="BaseFileManager_8cpp_source.html#l00041">readLandBlock()</a>, and <a class="el" href="BaseFileManager_8cpp_source.html#l00066">updateLandBlock()</a>.</p>

</div>
</div>
<a id="abe933c9fb8998fdb396d75bdff9cdb98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe933c9fb8998fdb396d75bdff9cdb98">&#9670;&nbsp;</a></span>updateLandBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseFileManager::updateLandBlock </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mapNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pLandData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>updates a land block in memory and in <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a>'s map cache on disk </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapNumber</td><td>number corresponding to the map (e.g. map0.mul) </td></tr>
    <tr><td class="paramname">blockNum</td><td>number corresponding to the map block to be updated </td></tr>
    <tr><td class="paramname">pLandData</td><td>pointer to new data to replace the existing land data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00066">66</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="Debug_8h_source.html#l00110">Logger::g_pLogger</a>, <a class="el" href="classLogger.html#a827dd7de91559307344d98a5a939da1e">Logger::LogPrint()</a>, <a class="el" href="BaseFileManager_8h_source.html#l00130">m_pMapFileStream</a>, and <a class="el" href="classBaseFileManager.html#a6dd3bc918e3e7601f02323f1cffdc5b5">seekLandBlock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Atlas_8cpp_source.html#l00200">Atlas::onUpdateLand()</a>.</p>

</div>
</div>
<a id="a83076a39e86ec0eeec19bd21d09685fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83076a39e86ec0eeec19bd21d09685fb">&#9670;&nbsp;</a></span>writeStaticsBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseFileManager::writeStaticsBlock </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mapNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blockNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pBlockData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>updatedStaticsLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes data corresponding to the statics in a map block out to memory and to the <a class="el" href="classUltimaLive.html" title="Enables map streaming to the client and definition and use of additional maps. ">UltimaLive</a> file cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapNumber</td><td>Map Number </td></tr>
    <tr><td class="paramname">blockNum</td><td>Block number </td></tr>
    <tr><td class="paramname">pBlockData</td><td>Pointer tot he new block data </td></tr>
    <tr><td class="paramname">updatedStaticsLength</td><td>Number of bytes in the new data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="BaseFileManager_8cpp_source.html#l00167">167</a> of file <a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a>.</p>

<p class="reference">References <a class="el" href="Debug_8h_source.html#l00110">Logger::g_pLogger</a>, <a class="el" href="classLogger.html#a827dd7de91559307344d98a5a939da1e">Logger::LogPrint()</a>, <a class="el" href="BaseFileManager_8h_source.html#l00131">m_pStaidxFileStream</a>, <a class="el" href="BaseFileManager_8h_source.html#l00127">m_pStaidxPool</a>, <a class="el" href="BaseFileManager_8h_source.html#l00132">m_pStaticsFileStream</a>, <a class="el" href="BaseFileManager_8h_source.html#l00125">m_pStaticsPool</a>, <a class="el" href="BaseFileManager_8h_source.html#l00126">m_pStaticsPoolEnd</a>, and <a class="el" href="BaseFileManager_8h_source.html#l00120">STATICS_MEMORY_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="Atlas_8cpp_source.html#l00186">Atlas::onUpdateStatics()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>UltimaLive/FileSystem/<a class="el" href="BaseFileManager_8h_source.html">BaseFileManager.h</a></li>
<li>UltimaLive/FileSystem/<a class="el" href="BaseFileManager_8cpp_source.html">BaseFileManager.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 22 2017 23:12:42 for UltimaLive by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
